<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CatÃ¡logo de Productos</title>
  <script src="https://glbplyqmksjrbebvluls.supabase.com"></script>
  <script src="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdsYnBseXFta3NqcmJlYnZsdWxzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MDI4NzYsImV4cCI6MjA3NTI3ODg3Nn0.7NflX5gh_CKHTUu-hePQTdTu-MPx2zJBJZ6R5VdZzk0"></script>
</head>
<body class="min-h-screen bg-gray-50 p-6 font-sans">

  <header class="max-w-6xl mx-auto mb-6 text-center">
    <h1 class="text-3xl font-bold">CatÃ¡logo de Productos</h1>
    <p class="text-sm text-gray-600">Consulta los productos disponibles</p>
    <div class="flex justify-center mt-4">
      <select id="filtroCategoria" class="border rounded px-3 py-2"></select>
    </div>
  </header>

  <main class="max-w-6xl mx-auto">
    <section id="contenedorProductos" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></section>
  </main>

  <footer class="max-w-6xl mx-auto mt-8 text-center text-xs text-gray-500">
    CatÃ¡logo generado con HTML + JS + Supabase â€” Responsive
  </footer>

  <script>
    // ðŸ”‘ PONER TUS DATOS DE SUPABASE
    const SUPABASE_URL = "TU_SUPABASE_URL";
    const SUPABASE_ANON_KEY = "TU_SUPABASE_ANON_KEY";
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const CATEGORIES = ["Regaleria", "Jugueteria", "Bazar", "Libreria", "Limpieza e Higiene Personal"];
    let filtroCategoria = "Todos";

    const filtroSelect = document.getElementById("filtroCategoria");
    const contenedorProductos = document.getElementById("contenedorProductos");

    // Inicializar select
    filtroSelect.innerHTML = `<option>Todos</option>` + CATEGORIES.map(c => `<option>${c}</option>`).join("");

    filtroSelect.addEventListener("change", e => {
      filtroCategoria = e.target.value;
      renderProductos();
    });

    let productos = [];

    async function fetchProductos() {
      const { data, error } = await supabase.from('productos').select('*').order('creado_en', { ascending: false });
      if (error) return alert("Error cargando productos: " + error.message);
      productos = data;
      renderProductos();
    }

    function renderProductos() {
      let filtrados = filtroCategoria === "Todos" ? productos : productos.filter(p => p.categoria === filtroCategoria);
      contenedorProductos.innerHTML = filtrados.length === 0
        ? `<div class="col-span-full bg-white p-6 rounded shadow text-center text-gray-600">No hay productos para mostrar.</div>`
        : filtrados.map(p => `
          <article class="bg-white p-4 rounded shadow">
            <div class="h-40 bg-gray-100 rounded flex items-center justify-center overflow-hidden mb-3">
              ${p.imagenUrl ? `<img src="${p.imagenUrl}" alt="${p.nombre}" class="object-cover w-full h-full">` : `<div class="text-gray-400">Sin imagen</div>`}
            </div>
            <h3 class="font-semibold">${p.nombre}</h3>
            <div class="text-sm text-gray-600">${p.categoria} â€¢ ${p.codigo || "-"}</div>
            <p class="mt-2 text-sm text-gray-700">${p.descripcion || ""}</p>
            <div class="mt-3 text-sm font-medium">${p.precio || "--"}</div>
          </article>
        `).join("");
    }

    fetchProductos();
    // opcional: refrescar cada 30 segundos
    setInterval(fetchProductos, 30000);
  </script>

</body>
</html>
>
